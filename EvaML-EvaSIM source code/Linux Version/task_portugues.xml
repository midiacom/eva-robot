<?xml version="1.0" encoding="UTF-8"?>
<evaml name="task_portugues"
  xsi:noNamespaceSchemaLocation="EvaML-Schema/evaml_schema.xsd"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <settings>
      <voice tone="pt-BR_IsabelaV3Voice" />
      <lightEffects mode="ON" />
      <audioEffects mode="ON" />
    </settings>
    <script>
      <!-- tarefa (parte 01) *********************************************************************** -->
      <evaEmotion emotion="NEUTRAL" />
      <light state="ON" color="WHITE" />
      <audio source="mario-start-01" block="TRUE" />
      <light state="ON" color="YELLOW" />
      <evaEmotion emotion="HAPPY" />
      <talk>Oi, eu sou o robô EVA / Olá, meu nome é EVA / Oi, como vai? Eu sou o robô EVA</talk>
      <light state="ON" color="PINK" />
      <evaEmotion emotion="NEUTRAL" />
      <wait duration="2000" />
      <!-- tarefa (parte 02) ************************************************************************* -->
      <talk>Qual o seu nome?</talk>
      <listen />
      <talk>Oi $, eu vou te mostrar minhas expressões</talk>
      <evaEmotion emotion="HAPPY"/>
      <talk>Eu posso expressar alegria</talk>
      <evaEmotion emotion="SAD"/>
      <talk>Eu posso expressar tristeza</talk> 
      <evaEmotion emotion="ANGRY"/>
      <talk>eu também posso expressar raiva</talk>
      <evaEmotion emotion="NEUTRAL"/>
      <talk>Ei $, vamos jogar o jogo da imitação? Sim ou Não?</talk>
      <listen />
      <switch var="$">
        <case op="contain" value="s"> <!-- Captura Sim-->
          <evaEmotion emotion="HAPPY" />
          <talk>Excelente! Vamos começar agora!</talk>
        </case>
        <case op="contain" value="k"> <!-- Captura Ok-->
          <evaEmotion emotion="HAPPY" />
          <talk>Excelente! Vamos começar agora!</talk>
        </case>
        <default> <!-- Captura algo diferente de sim ou ok-->
          <evaEmotion emotion="SAD" />
          <talk>Puxa, eu lamento que você não queira jogar. Adeus!</talk>
          <light state="OFF" />
          <stop />
        </default>
      </switch>
      <!-- tarefa (parte 03) ************************************************************************* -->
      <talk>Eu vou te mostrar algumas expressões e você tenta me imitar</talk>
      <counter var="score" op="=" value="0" />
      <counter var="chance" op="=" value="0" />
      <random id = "LOOP" min="1" max="3" />
      <switch var="$">
        <case op="eq" value="1">
          <evaEmotion emotion="SAD" />
          <light state="ON" color="BLUE" />
          <useMacro macro="GET_EXPRESSION" />
          <switch var="$">
            <case op="exact" value="sad">
              <useMacro macro="RIGHT_ANSWER" />
            </case>
            <default>
              <useMacro macro="WRONG_ANSWER" />
            </default>
          </switch>
        </case>
        <case op="eq" value="2">
          <evaEmotion emotion="HAPPY" />
          <light state="ON" color="YELLOW" />
          <useMacro macro="GET_EXPRESSION" />
          <switch var="$">
            <case op="exact" value="happy">
              <useMacro macro="RIGHT_ANSWER" />
            </case>
            <default>
              <useMacro macro="WRONG_ANSWER" />
            </default>
          </switch>
        </case>
        <case op="eq" value="3">
          <evaEmotion emotion="ANGRY" />
          <light state="ON" color="RED" />
          <useMacro macro="GET_EXPRESSION" />
          <switch var="$">
            <case op="exact" value="angry">
              <useMacro macro="RIGHT_ANSWER" />
            </case>
            <default>
              <useMacro macro="WRONG_ANSWER" />
            </default>
          </switch>
        </case>
      </switch>
      <counter var="chance" op="+" value="1" />
      <switch var="chance">
        <case op="eq" value="3">
          <evaEmotion emotion="HAPPY" />
          <talk>Sua pontuação foi #score</talk>
          <talk>Foi muito bom jogar com você $1. Até logo</talk>
          <light state="OFF" />
          <stop />
        </case>
        <default>
          <goto target="LOOP" />
        </default>
      </switch>
  </script>
  <macros>
    <!-- Usada na tarefa 3 -->
    <macro id="GET_EXPRESSION">
      <talk>Você consegue me imitar?</talk>
      <userEmotion />
    </macro>
    <!-- Usada na tarefa 3 -->
    <macro id="RIGHT_ANSWER">
      <evaEmotion emotion="HAPPY" />
      <talk>Muito bom! Você acertou</talk>
      <counter var="score" op="+" value="1" />
    </macro>
    <!-- Usada na tarefa 3 -->
    <macro id="WRONG_ANSWER">
      <evaEmotion emotion="SAD" />
      <talk>Puxa, não foi dessa vez!</talk>
    </macro>
  </macros>
</evaml>